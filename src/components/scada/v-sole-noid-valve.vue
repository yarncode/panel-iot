<template>
  <v-element :resize-mode="props.resizeMode" :width="props.width" :height="props.height" :disable="props.disable" :size="props.size" :anchor_name="ANCHOR_TYPE" :mark_point="MARK_POINT" :map="props.map">
    <desc>Copyright Opto 22</desc>
    <g>
      <g id="frame">
        <rect fill="none" width="100" height="100"></rect>
      </g>
      <g id="shape">
        <path
          fill="#2398C9"
          d="M99.359,68.574H87.087c-0.459,0-0.831,0.372-0.831,0.831v1.755h-7.878c-0.459,0-0.831,0.372-0.831,0.831
            v0.946h-4.331V71.99c0-0.459-0.372-0.831-0.831-0.831h-0.974v-5.858c0-0.082-0.018-0.159-0.024-0.239h2.517v-2.077h0.415
            c1.835,0,3.323-1.488,3.323-3.323v-4.251c0-1.835-1.488-3.323-3.323-3.323h-0.176l-0.24-0.431l-0.5-1.62h-0.901L72.49,50.01h-1.501
            v-1.532h-2.378v1.532h-8.985v-5.338H72.08c0.918,0,1.662-0.744,1.662-1.662v-6.019h16.674c2.294,0,4.153-1.86,4.153-4.153V21.435
            c0-2.294-1.86-4.154-4.154-4.154H73.741v-6.654c0-0.129-0.031-0.256-0.088-0.371l-1.231-1.459c-0.19-0.225-0.47-0.355-0.764-0.355
            h-44.11c-0.295,0-0.574,0.13-0.764,0.355l-1.231,1.459c-0.058,0.115-0.088,0.243-0.088,0.371V43.01
            c0,0.918,0.744,1.662,1.662,1.662h13.408v5.338h-8.074v-1.532h-2.378v1.532h-3.08l-0.664,2.143l-1.14,0.2
            c-1.187,0.507-2.02,1.684-2.02,3.057v4.251c0,1.835,1.488,3.323,3.323,3.323h0.995v2.077h1.938
            c-0.006,0.08-0.024,0.157-0.024,0.239v5.858H28.5c-0.459,0-0.831,0.372-0.831,0.831v0.946h-4.086v-0.946
            c0-0.459-0.372-0.831-0.831-0.831h-8.376v-1.755c0-0.459-0.372-0.831-0.831-0.831H1.273c-0.459,0-0.831,0.372-0.831,0.831V89.64
            c0,0.459,0.372,0.831,0.831,0.831h12.273c0.458,0,0.83-0.372,0.83-0.83v-1.756h8.376c0.458,0,0.83-0.372,0.83-0.83v-1.656h4.086
            v1.655c0,0.459,0.372,0.831,0.831,0.831h0.911v0.361c0,1.835,1.488,3.323,3.323,3.323h35.355c1.835,0,3.322-1.488,3.322-3.322
            v-0.362h0.973c0.459,0,0.832-0.372,0.832-0.832v-1.654h4.331v1.655c0,0.459,0.372,0.831,0.831,0.831h7.878v1.755
            c0,0.459,0.372,0.831,0.831,0.831h12.272c0.459,0,0.831-0.372,0.831-0.831v-2.586V71.991v-2.586
            C100.19,68.946,99.818,68.574,99.359,68.574z"
        ></path>
        <path fill="#27AAE1" d="M23.583,74.187"></path>
      </g>
      <g id="light">
        <path
          fill="#2398C9"
          d="M73.741,36.991h16.674c2.294,0,4.153-1.86,4.153-4.153V21.435c0-2.294-1.86-4.154-4.154-4.154H73.741
            V36.991z"
        ></path>
      </g>
      <g id="dark">
        <path
          fill="#58595B"
          d="M71.658,8.442c0.295,0,0.574,0.13,0.764,0.355l1.231,1.459c0.057,0.115,0.088,0.243,0.088,0.371V43.01
            c0,0.918-0.744,1.662-1.662,1.662H27.127c-0.918,0-1.662-0.744-1.662-1.662V10.627c0-0.129,0.03-0.256,0.088-0.371l1.231-1.459
            c0.19-0.225,0.47-0.355,0.764-0.355L71.658,8.442z"
        ></path>
        <path
          fill="#58595B"
          d="M25.553,10.256l1.231-1.459c0.19-0.225,0.47-0.355,0.764-0.355l44.11,0c0.295,0,0.574,0.13,0.764,0.355
            l1.231,1.459L25.553,10.256z"
        ></path>
      </g>
      <g id="shadow">
        <path fill="#0D0D0D" d="M13.376,90.471H1.443c-0.552,0-1-0.448-1-1v-3.03h13.934v3.03C14.376,90.023,13.929,90.471,13.376,90.471z"></path>
        <path fill="#0D0D0D" d="M99.19,90.471H87.256c-0.552,0-1-0.448-1-1v-3.03h13.934v3.03C100.19,90.023,99.742,90.471,99.19,90.471z"></path>
        <polygon
          fill="#0D0D0D"
          points="69.092,65.062 69.092,62.985 32.311,62.985 32.311,65.062 29.435,65.062 29.435,66.697 
            71.497,66.697 71.497,65.062 	"
        ></polygon>
        <rect x="40.535" y="44.672" fill="#0D0D0D" width="19.092" height="2.838"></rect>
        <rect x="23.18" y="56.78" fill="#0D0D0D" width="54.464" height="1"></rect>
        <path fill="#0D0D0D" d="M73.741,34.707v2.284h16.673c1.617,0,3.004-0.934,3.69-2.284H73.741z"></path>
        <path fill="#0D0D0D" d="M77.547,85.399v1.655c0,0.459,0.372,0.831,0.831,0.831h7.878v-2.486H77.547z"></path>
        <path fill="#0D0D0D" d="M14.376,85.399v2.486h8.376c0.458,0,0.83-0.372,0.83-0.83v-1.656H14.376z"></path>
        <polyline fill="#0D0D0D" points="73.216,83.649 77.547,83.649 77.547,85.399 73.216,85.399 	"></polyline>
        <rect x="23.583" y="83.649" fill="#0D0D0D" width="4.086" height="1.75"></rect>
        <rect x="23.583" y="73.187" fill="#0D0D0D" width="0.5" height="12.213"></rect>
        <rect x="14.376" y="72.479" fill="#0D0D0D" width="0.5" height="13.963"></rect>
        <rect x="86.256" y="70.687" fill="#0D0D0D" width="0.5" height="16.463"></rect>
        <rect x="77.548" y="72.479" fill="#0D0D0D" width="0.5" height="13.963"></rect>
        <rect x="27.169" y="72.937" fill="#0D0D0D" width="0.5" height="12.463"></rect>
        <rect x="73.217" y="72.937" fill="#0D0D0D" width="0.5" height="12.463"></rect>
        <path
          fill="#0D0D0D"
          d="M32.823,88.246h-3.412c0,1.835,1.488,3.323,3.323,3.323h35.355c1.835,0,3.323-1.488,3.322-3.323h-3.338
            C57.403,89.477,43.494,89.477,32.823,88.246z"
        ></path>
        <circle fill="#0D0D0D" cx="29.112" cy="14.532" r="2.17"></circle>
        <circle fill="#0D0D0D" cx="70.303" cy="14.532" r="2.17"></circle>
        <circle fill="#0D0D0D" cx="29.112" cy="40.957" r="2.17"></circle>
        <circle fill="#0D0D0D" cx="70.303" cy="40.957" r="2.17"></circle>
      </g>
      <g id="hlight">
        <path
          fill="#9FE0FC"
          d="M14.377,72.604H0.443v-3.199c0-0.459,0.372-0.831,0.831-0.831h12.272c0.459,0,0.831,0.372,0.831,0.831
            L14.377,72.604z"
        ></path>
        <path
          fill="#9FE0FC"
          d="M100.19,72.604H86.256v-3.199c0-0.459,0.372-0.831,0.831-0.831h12.272c0.459,0,0.831,0.372,0.831,0.831
            V72.604z"
        ></path>
        <path fill="#9FE0FC" d="M23.583,71.991c0-0.459-0.372-0.831-0.831-0.831h-8.376v3.027h9.206V71.991z"></path>
        <path fill="#9FE0FC" d="M78.378,71.16c-0.459,0-0.831,0.372-0.831,0.831v2.196h8.709V71.16H78.378z"></path>
        <path fill="#9FE0FC" d="M90.415,17.281H73.741v2.729h20.56C93.719,18.422,92.206,17.281,90.415,17.281z"></path>
        <rect x="23.583" y="72.937" fill="#9FE0FC" width="4.086" height="1"></rect>
        <rect x="73.216" y="72.937" fill="#9FE0FC" width="4.331" height="1"></rect>
        <rect x="32.461" y="50.01" fill="#9FE0FC" width="36.15" height="1"></rect>
        <polygon fill="#9FE0FC" points="73.883,51.01 70.982,51.01 70.982,50.01 73.383,50.01 	"></polygon>
        <polygon fill="#9FE0FC" points="29.963,51.01 26.562,51.01 27.062,50.01 29.963,50.01 	"></polygon>
        <path fill="#9FE0FC" d="M73.216,71.426c-12.574,2.213-32.961,2.213-45.536,0"></path>
        <path fill="#9FE0FC" d="M75.809,52.532c-14.006,0.722-36.714,0.722-50.72,0"></path>
      </g>
    </g>
  </v-element>
</template>

<script setup lang="ts">
import { ref, onMounted, reactive } from 'vue'
import type { PropType } from 'vue'
import * as d3 from 'd3'
import { v4 } from 'uuid'
import { type PickerDiagram, ResizeMode } from '@/components/scada/interface/i-diagram'
import type { IAnchorAbstract } from '@/components/scada/interface/i-anchor'

import vElement from '@/components/scada/v-element.vue'

const ANCHOR_TYPE = v4()
const MARK_POINT = reactive<Array<IAnchorAbstract>>([
  {
    x: 0,
    y: 0,
  },
  {
    x: 50,
    y: 0,
  },
  {
    x: 100,
    y: 0,
  },
  {
    x: 0,
    y: 50,
  },
  {
    x: 50,
    y: 50,
  },
  {
    x: 100,
    y: 50,
  },
  {
    x: 0,
    y: 100,
  },
  {
    x: 50,
    y: 100,
  },
  {
    x: 100,
    y: 100,
  },
])

const props = defineProps({
  width: { type: Number, default: 400 },
  height: { type: Number, default: 300 },
  size: { type: Number, default: 100 },
  disable: { type: Boolean, default: false },
  resizeMode: { type: Object as PropType<ResizeMode>, default: ResizeMode.GRID },
  map: { type: Array as PropType<readonly PickerDiagram[]>, default: () => [] },
})

console.log('props.resizeMode:', props.resizeMode)

onMounted(() => {
  /* phase: init something */
})
</script>
